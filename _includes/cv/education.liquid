{% comment %}
  Unified education entry renderer for both RenderCV and JSONResume formats
  Handles both:
  - RenderCV: institution, area, studyType (or degree), start_date, end_date, location, courses, highlights
  - JSONResume: institution, area, studyType, startDate, endDate, location, courses, highlights
{% endcomment %}

<ul class="card-text font-weight-light list-group list-group-flush">
  {% for entry in entries %}
    <li class="list-group-item">
      <div class="row">
        <div class="col-xs-2 col-sm-2 col-md-2 text-center date-column">
          {% capture start_date %}
            {% if entry.start_date %}{{ entry.start_date }}{% elsif entry.startDate %}{{ entry.startDate }}{% endif %}
          {% endcapture %}
          {% capture end_date %}
            {% if entry.end_date %}{{ entry.end_date }}{% elsif entry.endDate %}{{ entry.endDate }}{% endif %}
          {% endcapture %}

          {% if start_date != '' %}
            {% assign start_parts = start_date | strip | split: '-' %}
            {% assign start_year = start_parts[0] %}
            {% assign start_month_num = start_parts[1] %}

            {% assign month_names = 'Jan,Feb,Mar,Apr,May,Jun,Jul,Aug,Sep,Oct,Nov,Dec' | split: ',' %}
            {% if start_month_num %}
              {% assign start_month_index = start_month_num | minus: 1 %}
              {% assign start_month_name = month_names[start_month_index] %}
              {% assign startDate = start_month_name | append: ' ' | append: start_year %}
            {% else %}
              {% assign startDate = start_year %}
            {% endif %}

            {% assign end_stripped = end_date | strip %}
            {% if end_stripped == '' or end_stripped == 'present' or end_stripped == 'Present' %}
              {% assign endDate = 'Present' %}
            {% else %}
              {% assign end_parts = end_stripped | split: '-' %}
              {% assign end_year = end_parts[0] %}
              {% assign end_month_num = end_parts[1] %}
              {% if end_month_num %}
                {% assign end_month_index = end_month_num | minus: 1 %}
                {% assign end_month_name = month_names[end_month_index] %}
                {% assign endDate = end_month_name | append: ' ' | append: end_year %}
              {% else %}
                {% assign endDate = end_year %}
              {% endif %}
            {% endif %}

            {% assign date = startDate | append: ' â€“ ' | append: endDate %}
          {% else %}
            {% assign date = '' %}
          {% endif %}

          <table class="table-cv">
            <tbody>
              <tr>
                <td>
                  {% if date %}
                    <span class="badge font-weight-bold danger-color-dark text-uppercase align-middle" style="min-width: 75px">{{ date }}</span>
                  {% endif %}
                </td>
              </tr>
              {% capture location %}
                {% if entry.location %}{{ entry.location }}{% endif %}
              {% endcapture %}
              {% if location != '' %}
                <tr>
                  <td>
                    <p class="location">
                      <i class="fa-solid fa-location-dot iconlocation"></i>
                      {{ location }}
                    </p>
                  </td>
                </tr>
              {% endif %}
            </tbody>
          </table>
        </div>
        <div class="col-xs-10 col-sm-10 col-md-10 mt-2 mt-md-0">
          {% capture study_type %}
            {% if entry.studyType %}{{ entry.studyType }}{% elsif entry.degree %}{{ entry.degree }}{% endif %}
          {% endcapture %}

          {% if entry.url %}
            <h6 class="title font-weight-bold ml-1 ml-md-4">
              <a href="{{ entry.url }}">{{ study_type }}</a>
            </h6>
          {% elsif study_type != '' %}
            <h6 class="title font-weight-bold ml-1 ml-md-4">{{ study_type }}</h6>
          {% endif %}

          {% if entry.institution %}
            <h6 class="ml-1 ml-md-4" style="font-size: 0.95rem">{{ entry.institution }}</h6>
          {% endif %}

          {% if entry.area %}
            <h6 class="ml-1 ml-md-4" style="font-size: 0.95rem; font-style: italic">{{ entry.area }}</h6>
          {% endif %}

          {% if entry.courses or entry.highlights %}
            <ul class="items">
              {% for item in entry.courses %}
                <li>
                  <span class="item">{{ item }}</span>
                </li>
              {% endfor %}
              {% for item in entry.highlights %}
                <li>
                  <span class="item">{{ item | markdownify | remove: '<p>' | remove: '</p>' }}</span>
                </li>
              {% endfor %}
            </ul>
          {% endif %}
        </div>
      </div>
    </li>
  {% endfor %}
</ul>
